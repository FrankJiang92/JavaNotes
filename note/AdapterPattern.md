### 适配器模式

---

#### 定义

* **适配器模式**（Adapter Pattern）是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。
* 涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能，这个类成为适配器类
* 比如：读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡

#### UML图
参考[菜鸟教程](http://www.runoob.com/)上的适配器模式的UML图如下：

![adapter](res/adapter.jpg)

#### 组成结构

* 源角色（Adapee）
	* `MediaPlayer`:基础的媒体播放器接口，只能播放mp3文件
	* `MediaPlayerImpl`:基础的媒体播放器实现类，如果为mp3,直接播放，否则，交给适配器类处理

* 目标角色（Target）
	* `AdvanceMediaPlayer`:高级的媒体播放器接口，可以播放其他格式文件
	* `Mp4MediaPlayer`:Mp4播放器实现类，实现高级媒体播放器接口，可以播放mp4文件

* 适配器角色（Adpater）：
	* `MediaAdapter`:适配器实现类，继承基础媒体播放器接口，用来**处理**和**扩展**基础的媒体播放器，可以播放其他格式的媒体文件，比如mp4

* 如何扩展？（新的媒体文件格式出现，比如rmvb）
	* 增加`RmvbMediaPlayer`:Rmvb播放器实现类，实现高级媒体播放器接口，播放rmvb文件
	* 修改`MediaAdapter`，增加对于rmvb的处理方法

* 参考源码：`src/designpattern/adapter`

#### 优点：

* 通过适配器，客户端可以调用同一接口，因而对客户端来说是透明的
* 将目标类和适配者类解耦，通过引入一个适配器类重用现有的适配者类，而无需修改原有代码
* 一个对象适配器可以把多个不同的适配者类适配到同一个目标
* 可扩展现有的接口，如需要扩展，只需要增加一个接口实现类，并修改适配器类即可

#### 适用场景

* 系统需要使用现有的类，而这些类的接口不符合系统的接口
* 想要建立一个可以重用的类，用于与一些彼此之间没有太大关联的一些类，包括一些可能在将来引进的类一起工作
* 两个类所做的事情相同或相似，但是具有不同接口的时候
* 旧的系统开发的类已经实现了一些功能，但是客户端却只能以另外接口的形式访问，但我们不希望手动更改原有类的时候
* 使用第三方组件，组件接口定义和自己定义的不同，不希望修改自己的接口，但是要使用第三方组件接口的功能

##### 参考

* http://www.runoob.com/design-pattern/adapter-pattern.html
* http://lib.csdn.net/article/javase/1979