# Linux学习笔记

## 1. Linux常用命令

### 1.1 命令基本格式

* `[root@localhost ~]#`
	* `root`:当前用户名，root为管理员用户
	* `localhost`:主机名
	* `~`:家目录
	* `#`:超级用户的提示符（普通用户提示符为`$`）

* 命令格式：`命令 [选项] [参数]`

* 权限符`-rw-r--r--`
	* 文件类型：

### 1.2 目录操作

* `cd`

* `mkdir`:创建目录
	* `-p`:递归创建

* `rm`:删除文件
	* `-r`：删除目录
	* `-rf`：强制删除目录

* `cp 源文件 目标文件`:复制文件
	* `-r`:复制目录
	* `-p`:连同文件属性复制
	* `-d`:若源文件是链接文件，则复制链接属性
	* `-a`:相当于`-pdr`

* `mv 源文件 目标文件`:移动
	* 源文件和目标文件在同一目录下相当于改名

### 1.3 常见目录含义

* `/`:根目录
* `/bin`:执行指令
* `/sbin`:root的执行指令
* `/dev`:硬件文件
* `/etc`:配置文件目录
* `/lib`:函数库目录
* `/media`:挂载目录
* `/mnt`:挂载目录
* `/misc`:挂载目录
* `/sys`:写入内存的目录，不可以操作
* `/proc`:写入内存目录，不可以操作
* `/usr`:系统资源保存目录
* `/var`:系统可变文档目录
* `/temp`:临时目录

### 1.4 链接命令

* 硬链接
	* 拥有相同的i节点和block块，相当于同一个文件，但引用计数增大
	* 删除其中一个，另一个不受影响
	* 修改其中一个，另外一个也会修改
	* 可通过i节点识别
	* 只能针对文件，不能针对目录
	* 不能跨磁盘的分区

* 软链接
	* 类似windows的快捷方式
	* 软链接拥有自己的i节点和block块，但是数据库中只保存原文件的文件名和i节点号，并没有实际的数据
	* 元文件删除后，软链接也不能使用
	* 修改任意文件，另一个都会修改
	* 软链接文件类型为l，文件权限为lrwxrwxrwx，但具体权限需要根据源文件来判断
	* **软链接一定要写成绝对路径**

* `ln [源文件] [目标文件]`
	* `-s`:软链接

### 1.5 文件搜索命令

* 1.5.1 文件搜索命令`locate`
	* 使用：`locate [文件名]`
	* 在后台数据库按文件名搜索，搜索速度快
	* 后台数据库：`/var/lib/mlocate`，但不是实时更新
	* 更新数据库：`updatedb`
	* 只能按照文件名搜索

* 1.5.2 命令搜索命令`whereis`与`which`
	* `whereis [命令名]`:显示某个命令的路径及帮助文档的路径
		* `-b`:只查找可执行文件
		* `-m`:只查找帮助文件
	* `which [命令名]`:搜索命令的路径以及命令的别名
	* PATH环境变量：定义的是系统搜索命令的路径

* 1.5.3 文件搜索命令`find`
	* 使用：`find [搜索范围] [搜索文件]`
	* find为精确查询，若模糊查询，需使用通配符
	* 高级用法
		* `find /root -name install.log`：查找文件
		* `find /root -iname install.log`:不区分大小写
		* `find /root -user root`：按照所有者查找
		* `find /root -nouser`：查找没有所有者的文件（内核产生的，来自其他系统，比如U盘拷贝，垃圾文件）
		* `find /var/log/ -mtime +10`：查找10天前修改的文件
			* -10：10天内的文件
			* 10：10天当天修改的文件
			* +10：10天前的文件
			* -atime：文件访问时间
			* -ctime：改变文件属性
			* -mtime：修改文件内容
		* `find /var/log -size 25k`：查找文件大小为25k的文件
			* +25k：大于25k的文件
			* 25k：等于25k的文件
			* -25k：小于25k的文件
			* +2M：大于2M的文件
			* **注意：k为小写，M为大写，且不能不带单位**
		* `find /var/log -inum 232323`：查找i节点为232323的文件
		* `find /var/log -size +20k -a -size -50k`：查找大于20k小于50k的文件
			* `-a`：逻辑与
			* `-o`：逻辑或
		* `find /var/log -size +20k -exec ls -lh {} \;`：将查找到的文件使用`ls -lh`处理显示
			* `-exec`：连接命令指令
	* Linux通配符：
		* `*`:匹配任意内容
		* `?`:匹配任意一个字符
		* `[]`:匹配任意一个中括号内的内容

* 1.5.4 字符串搜索命令`grep`
	* `grep [选项] 字符串 文件名`：在文件中查找指定的字符串
		* `-v`：排除想hi定的字符串
		* `-i`：忽略大小写

* 1.5.5 `find`命令与`grep`命令的区别
	* **find**：在系统中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符为完全匹配
	* **grep**：在指定文件中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式为包含匹配

### 1.6 帮助命令

* `man [选项] 命令`
	* `-f`：类似于whatis
	* `-k`：所有含有关键字的帮助文档
	* man的等级
* 其他帮助命令
	* `命令 --help`
	* `help shell内部命令`
	* `info 命令`

### 1.7 压缩与解压缩命令

* 常用压缩格式：.zip，.gz，.bz2，.tar.gz，.tar.bz2

* `.zip`：
	* `zip 压缩文件名 源文件`：压缩文件
	* `zip -r 压缩文件名 源目录`：压缩目录
	* `unzip 源文件`：解压缩
* `.gz`：
	* `gzip 源文件`：压缩为.gz格式的压缩文件，源文件会消失
	* `gzip -c 源文件 > 压缩文件`：压缩，源文件不消失
	* `gzip -r 源目录`：压缩目录下的所有的子文件，但不能压缩目录
	* `gzip -d 源文件`：解压缩文件
	* `gunzip 源文件`：解压缩文件
* `.bz2`:
	* `bzip2 源文件`：压缩为.bz2格式，不保留源文件
	* `bzip2 -k 源文件`：压缩之后保留源文件
	* `bzip2 -d 源文件`：解压缩，-k保留压缩文件
	* `bunzip2 源文件`：解压缩，-k保留压缩文件
	* bzip2命令只能压缩文件，不能压缩目录
* `.tar.gz`
	* `tar -cvf 打包文件名 源文件`：打包
		* `-c`：打包
		* `-v`：显示过程
		* `-f`：指定打包后的文件名
	* `tar -xvf 打包文件名`：解打包
		* `-x`：解打包
	* `tar -zcvf 压缩包名.tar.gz 源文件`：压缩为.tar.gz
		* `-z`：压缩为.tar.gz格式
	* `tar -zxvf 压缩包名.tar.gz`：解压缩.tar.gz文件
	* `tar -jcvf 压缩包名.tar.bz2`：压缩为.tar.bz2文件
	* `tar -jxvf 压缩包名.tar.bz2`：解压缩.tar.bz2文件
	* `tar -ztvf 压缩包名.tar.gz`：只查看压缩文件，不解压

### 1.8 关机与重启命令
	
* shutdown命令，可以保存状态
	* `shutdown [选项] 时间`
		* `-c`：取消前一个关机
		* `-h`：关机
		* `-r`：重启
		* `now`：当前时间
* 其他关机命令
	* `halt`
	* `poweroff`
	* `init 0`
* 其他重启命令
	* `reboot`
	* `init 6`
* **退出登录**
	* `logout`：每次用完，一定要退出登录
* 系统运行级别
	* 0：关机
	* 1：单用户
	* 2：不完全多用户，不含NFS服务
	* 3：完全多用户
	* 4：未分配
	* 5：图形界面
	* 6：重启
	* `runlevel`：查看系统运行级别
